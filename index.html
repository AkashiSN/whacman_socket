<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
  </head>
  <body>
    <span id="name"></span>
    <span id="score">0</span>p

    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.15.2/axios.js"></script>

    <script>
      const playerId = window.location.pathname.match(/\/players\/(.*)/)[1]
      axios.get('http://localhost:3000/api/players/' + playerId)
        .then(function(res) {
          setPlayerInfo(res.data);
        })
        .catch(function(err) {
          console.log(err);
        })
      var socket = io();
      socket.on('reflect scores', function(player) {
        if(player._id == playerId) {
          setPlayerInfo(player);
        }
      });

      function setPlayerInfo(player) {
        document.getElementById('name').innerHTML = player.name;
        document.getElementById('score').innerHTML = player.score;
      }

      // TODO: 60sカウントダウン
      // カウントダウン開始時にAPI叩く
      // カウントダウン終了時にAPI叩く
      // 終了したら最初の画面に遷移
</script>

  </body>
</html>
